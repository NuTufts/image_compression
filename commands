nvidia-docker build -t tensorflow_img:latest .


# https://blog.container-solutions.com/understanding-volumes-docker
nvidia-docker run --rm --user $(id -u):$(id -g) -v /home/jhwang/image_compression:/image_compression -it tensorflow_img

# kill containers
https://stackoverflow.com/questions/63074477/unable-to-delete-docker-images

https://www.pluralsight.com/guides/importing-image-data-into-numpy-arrays

/home/jhwang/image_compression/data/raw_images
/home/jhwang/image_compression/results/originals/originals_png


best performers: 
{'d': 32, 'batch_size': 25, 'k': 128, 'vqvae_layers': [32, 64]}


best overall:
batch_size = 25 run



VQVAE MSE: 0.003812762808760407, Trad compression MSE: 0.03658772472088132
VQVAE MSE: 0.0012453889161285088, Trad compression MSE: 0.3176499462632275
132K, 292K


VQVAE MSE: 0.0009368621093980717, Trad compression MSE: 0.3036594971707819
132K, 296K, original ~785

VQVAE MSE: 0.0006590077696234259, Trad compression MSE: 0.3397672489285469



round 2 hyperparameter optimizing
{'d': 32, 'batch_size': 15, 'k': 128, 'vqvae_layers': [16, 32]}
[0.0009948041080832578, 0.0009715073675619875, 0.0011500874943501903, 0.0007645941332610616, 
0.0009129235863112126, 0.001363215568858617, 0.0008687775722952013, 0.000950726958053435, 
0.00087673160897617, 0.0009224166917335552, 0.0010627764155517238, 0.0011234539065679376]
best overall: batch_size = 15 run


VQVAE MSE: 0.0006723000893408038, Trad compression MSE: 0.366633569449186
VQVAE MSE: 0.0007011180031080773, Trad compression MSE: 0.3477371983230114
VQVAE MSE: 0.0008152519956296872, Trad compression MSE: 0.3988371893763542

normal codes: 672K
short codes : 424K
originals: 3768K

[0.12672407925128937, 0.04473551735281944, 0.02556421048939228, 0.01777786575257778, 0.013851157389581203, 0.011330023407936096, 0.009843042120337486, 0.008034849539399147, 0.00724970456212759, 0.006447785999625921, 0.0055654216557741165, 0.005095308646559715, 0.004419431090354919, 0.004164318088442087, 0.0036796224303543568, 0.003511542920023203, 0.003298133611679077, 0.003073624800890684, 0.0029221647419035435, 0.0027670240961015224, 0.0026733027771115303, 0.002602391643449664, 0.002509287791326642, 0.002428540028631687, 0.002319574821740389, 0.0022604349069297314, 0.002232749480754137, 0.002140339929610491, 0.002134057693183422, 0.002044362248852849], 
'val_loss': [0.01885290816426277, 0.05696563795208931, 0.02305026724934578, 0.014021272771060467, 0.013507848605513573, 0.011374972760677338, 0.010781398974359035, 0.01116625964641571, 0.008249908685684204, 0.010357999242842197, 0.008323891088366508, 0.0077804625034332275, 0.005400106776505709, 0.004599990323185921, 0.004033979959785938, 0.004858291242271662, 0.0029677243437618017, 0.003272715024650097, 0.00339089916087687, 0.002918913960456848, 0.0027794952038675547, 0.0025645289570093155, 0.002361982362344861, 0.002716479357331991, 0.002755081048235297, 0.002638997044414282, 0.002522118156775832, 0.002091469708830118, 0.002317529171705246, 0.0025603030808269978]